import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as t,e as o,f as a,d as s,r as p,o as l,b as h}from"./app-C2CTEMVF.js";const g={};function c(m,e){const i=p("RouteLink");return l(),n("div",null,[e[1]||(e[1]=t("h1",{id:"一致性",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#一致性"},[t("span",null,"一致性")])],-1)),t("p",null,[o(i,{to:"/reference/%E5%AE%9E%E7%94%A8AI%E8%AE%B0%E5%BD%95%E6%9C%AC/AI%E7%BB%98%E5%9B%BE%E6%89%A9%E5%B1%95/%E4%B8%80%E8%87%B4%E6%80%A7/%E5%A4%9A%E8%A7%86%E8%A7%92.html"},{default:a(()=>e[0]||(e[0]=[h("多视角")])),_:1})]),e[2]||(e[2]=s('<p>ConsisID：开源的角色一致性文生视频模型<br> 项目主页: <a href="https://pku-yuangroup.github.io/ConsisID/" target="_blank" rel="noopener noreferrer">https://pku-yuangroup.github.io/ConsisID/</a><br> 在线试用: <a href="https://huggingface.co/spaces/BestWishYsh/ConsisID-preview-Space" target="_blank" rel="noopener noreferrer">https://huggingface.co/spaces/BestWishYsh/ConsisID-preview-Space</a></p><p>工作流：<a href="https://www.bilibili.com/video/BV1cX4y1z7Cb" target="_blank" rel="noopener noreferrer">工作流演示视频</a></p><p>1、使用 PR 自动重构为竖屏视频，然后用 ffmpeg 将视频转为帧率 18 的图片序列</p><p>2、使用 <a href="https://github.com/continue-revolution/sd-webui-segment-anything" target="_blank" rel="noopener noreferrer">Grounding DINO + Segment Anything</a> 将人物主体切分出来。这其中发现用 girl 作为 prompt 进行分割会偶尔导致大幅动作时双马尾脱锁，因此用 twin tails 又跑了一边，然后将 mask 合并</p><p>3、使用 <a href="https://github.com/toriato/stable-diffusion-webui-wd14-tagger" target="_blank" rel="noopener noreferrer">WD 1.4 tagger</a> 提取各帧提示词（阈值 0.65），然后用<a href="https://github.com/toshiaki1729/stable-diffusion-webui-dataset-tag-editor" target="_blank" rel="noopener noreferrer">数据集标签编辑器</a>进行批量编辑，主要编辑点：</p><ul><li>误识别的 thighhighs, black thighhighs，修正为 thigh boots, black thigh boots</li><li>去除 panties, underwear, pantyshot 等词条</li><li>添加 smile，不然一副面无表情的样子</li><li>添加 black background, simple background</li></ul><p>4、更新了<a href="https://github.com/OedoSoldier/sd-webui-image-sequence-toolkit" target="_blank" rel="noopener noreferrer">多帧渲染插件</a>，现在多帧渲染和之前的 enhanced img2img 都支持了 ControlNet 1.1 的 inpaint 模型</p><p>5、具体参数：</p><ul><li>模型：<a href="https://civitai.com/models/24387" target="_blank" rel="noopener noreferrer">Aniflatmix</a>（<a href="https://huggingface.co/OedoSoldier/aniflatmix" target="_blank" rel="noopener noreferrer">HuggingFace镜像</a>）</li><li>默认提示词：masterpiece, best quality, anime screencap</li><li>使用的负面 embed：<a href="https://civitai.com/models/7808" target="_blank" rel="noopener noreferrer">EasyNegative</a>, <a href="https://civitai.com/models/16993" target="_blank" rel="noopener noreferrer">badhandv4</a>, <a href="https://civitai.com/models/11772" target="_blank" rel="noopener noreferrer">verybadimagenegative_v1.3</a></li><li>生成分辨率：768 * 1360</li><li>CFG Scale：4</li><li>重绘幅度：0.75</li><li>ControlNet：全部启用 pixel perfect 和无提示词模式，权重均为 1，画面缩放模式均为&quot;仅调整大小（拉伸）&quot;</li><li>inpaint（预处理器：inpaint global harmonious）</li><li>ip2p（预处理器：none）</li><li>shuffle（预处理器：none）</li><li>lineart anime（预处理器：lineart anime）</li><li>softedge（预处理器：softedge pininet）</li><li>多帧渲染 initial denoising strength 设置为 0.75，启用 ControlNet inpaint，并从文件读取提示词，其他参数默认</li></ul><p>6、修正部分作画错误，用 PR 合成视频</p><p>顺带吐槽本来是昨晚睡前开始跑，结果跑到一半不知道什么原因报错，早上起来才发现只跑了两百帧，不然早就跑完了，幸好我的脚本支持继续任务，不然又得多跑好久。算下来七百多帧大约跑了八个多小时。</p>',11))])}const f=r(g,[["render",c],["__file","一致性.html.vue"]]),d=JSON.parse('{"path":"/reference/%E5%AE%9E%E7%94%A8AI%E8%AE%B0%E5%BD%95%E6%9C%AC/AI%E7%BB%98%E5%9B%BE%E6%89%A9%E5%B1%95/%E4%B8%80%E8%87%B4%E6%80%A7.html","title":"一致性","lang":"zh-CN","frontmatter":{"description":"一致性 ConsisID：开源的角色一致性文生视频模型 项目主页: https://pku-yuangroup.github.io/ConsisID/ 在线试用: https://huggingface.co/spaces/BestWishYsh/ConsisID-preview-Space 工作流：工作流演示视频 1、使用 PR 自动重构为竖屏视频，...","head":[["meta",{"property":"og:url","content":"https://game-dev.nihilityer.top/reference/%E5%AE%9E%E7%94%A8AI%E8%AE%B0%E5%BD%95%E6%9C%AC/AI%E7%BB%98%E5%9B%BE%E6%89%A9%E5%B1%95/%E4%B8%80%E8%87%B4%E6%80%A7.html"}],["meta",{"property":"og:site_name","content":"AI游戏开发参考"}],["meta",{"property":"og:title","content":"一致性"}],["meta",{"property":"og:description","content":"一致性 ConsisID：开源的角色一致性文生视频模型 项目主页: https://pku-yuangroup.github.io/ConsisID/ 在线试用: https://huggingface.co/spaces/BestWishYsh/ConsisID-preview-Space 工作流：工作流演示视频 1、使用 PR 自动重构为竖屏视频，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-14T01:42:25.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-14T01:42:25.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"一致性\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-14T01:42:25.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"nihilityer\\",\\"url\\":\\"https://game-dev.nihilityer.top\\"}]}"]]},"headers":[],"git":{"createdTime":1734247850000,"updatedTime":1736818945000,"contributors":[{"name":"bot","username":"bot","email":"bot@mail.nihilityer.top","commits":1},{"name":"nihilityer","username":"nihilityer","email":"nihilityer@mail.nihilityer.top","commits":1}]},"readingTime":{"minutes":1.85,"words":556},"filePathRelative":"reference/实用AI记录本/AI绘图扩展/一致性.md","localizedDate":"2024年12月15日","autoDesc":true,"excerpt":"\\n<p><a href=\\"/reference/%E5%AE%9E%E7%94%A8AI%E8%AE%B0%E5%BD%95%E6%9C%AC/AI%E7%BB%98%E5%9B%BE%E6%89%A9%E5%B1%95/%E4%B8%80%E8%87%B4%E6%80%A7/%E5%A4%9A%E8%A7%86%E8%A7%92.html\\" target=\\"_blank\\">多视角</a></p>\\n<p>ConsisID：开源的角色一致性文生视频模型<br>\\n项目主页: <a href=\\"https://pku-yuangroup.github.io/ConsisID/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://pku-yuangroup.github.io/ConsisID/</a><br>\\n在线试用: <a href=\\"https://huggingface.co/spaces/BestWishYsh/ConsisID-preview-Space\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://huggingface.co/spaces/BestWishYsh/ConsisID-preview-Space</a></p>"}');export{f as comp,d as data};
